---
layout: post
title: "Lectura y creaci贸n de archivos JSON en Business Central: 隆Domina el intercambio de datos estructurados!"
summary: "Descubre c贸mo trabajar con archivos JSON en Business Central utilizando el lenguaje AL. Aprende a leer y procesar datos de archivos JSON, as铆 como a crear y descargar archivos JSON. Mejora tus habilidades en el intercambio de datos estructurados y potencia tus proyectos en Business Central."
author: "Esteve Sanpons"
date: "2023-07-10 04:00:00 +0200"
#cSpell:disable
category: ["Json", "Business_Central"]
thumbnail: /assets/img/posts/json-en-bc/imagen01.png
permalink: /blog/json-en-bc/
custom_type: Blog
#cSpell:enable
---

Hola a todos! Una vez m谩s, les traigo un nuevo post muy interesante.

En esta ocasi贸n, vamos a aprender sobre la lectura y creaci贸n de archivos JSON en Business Central, una plataforma ERP basada en la nube que permite gestionar y automatizar procesos empresariales.

Antes de adentrarnos en el c贸digo, hagamos una breve explicaci贸n. JSON es un formato de intercambio de datos muy utilizado en aplicaciones web y m贸viles para transmitir informaci贸n estructurada. En este post, aprenderemos c贸mo trabajar con archivos JSON en Business Central utilizando el lenguaje AL.

<br>

Como siempre despu茅s de la breve explicaci贸n 隆Vamos manos a la obra! 

<br>

## Lectura de archivos JSON

Para leer un archivo JSON en Business Central, debemos seguir algunos pasos.

En primer lugar, necesitamos subir el archivo para luego poder leer su contenido y convertirlo en un objeto JSON para procesar los datos.

A continuaci贸n, les mostrar茅 un ejemplo de c贸mo leer un archivo JSON en Business Central utilizando el lenguaje AL:

```javascript
    procedure ReadJsonFromFile()
    var
        DocInStream: InStream;
        FileName: Text;
        jsonText: Text;
        jsonString: Text;
        jsonObj: JsonObject;
        JToken: JsonToken;
        filePath: Text;
        id: Text;
        name: Text;
        age: Integer;
    begin
        if not UploadIntoStream('', '', '', FileName, DocInStream) then
            exit;

        DocInStream.ReadText(jsonText);

        // Leer el contenido del archivo JSON
        Clear(jsonObj);
        jsonObj.ReadFrom(jsonText);

        // Leer los valores de los campos
        jsonObj.SelectToken('id', JToken);
        id := JToken.AsValue().AsText();

        jsonObj.SelectToken('name', JToken);
        name := JToken.AsValue().AsText();

        jsonObj.SelectToken('age', JToken);
        age := JToken.AsValue().AsInteger();

        // Procesar los datos
        Message('ID: %1, Name: %2, Age: %3', id, name, age);
    end;
```

<br>

En esta funci贸n, leeremos el contenido del archivo JSON y lo convertiremos en un objeto JSON.

Luego, seleccionaremos los valores de los campos que nos interesen y los almacenaremos en variables.

Finalmente, procesaremos los datos obtenidos, en este caso, los mostraremos en un mensaje.

<br><br>

## Creaci贸n de archivos JSON

Ahora, pasemos a la creaci贸n de archivos JSON en Business Central. Para ello, debemos definir la estructura del objeto JSON y luego convertirlo en una cadena JSON que se pueda escribir en un archivo.

A continuaci贸n, les presento un ejemplo de c贸mo crear un archivo JSON en Business Central utilizando el lenguaje AL:

```javascript
    procedure CreateJsonFile()
    var
        TempBlob: Codeunit "Temp Blob";
        DocOutStream: OutStream;
        DocInStream: InStream;
        FileName: Text;
        jsonObj: JsonObject;
        jsonString: Text;
        filePath: Text;
    begin
        // Crear un objeto JSON
        Clear(jsonObj);
        jsonObj.Add('id', '1234');
        jsonObj.Add('name', 'Esteve');
        jsonObj.Add('age', '25');

        //convertimos Json en un texto
        jsonObj.WriteTo(jsonString);

        // Escribir la cadena JSON en un archivo y lo descargamos
        FileName := 'archivo.json';

        TempBlob.CreateOutStream(DocOutStream);
        DocOutStream.WriteText(jsonString);

        TempBlob.CreateInStream(DocInStream);
        DownloadFromStream(DocInStream, '', '', '', FileName);
    end;
```

<br>

En este ejemplo, creamos un objeto JSON y definimos los valores de los campos que queremos incluir en 茅l.

Luego, convertimos ese objeto JSON en una cadena de texto que representa el formato JSON.

Finalmente, escribimos la cadena JSON en un archivo y lo descargamos.

<br><br>

En resumen, en este art铆culo hemos aprendido a leer y crear archivos JSON en Business Central utilizando el lenguaje AL. La lectura de archivos JSON implica leer el contenido del archivo, convertirlo en un objeto JSON y procesar los datos obtenidos. Por otro lado, la creaci贸n de archivos JSON implica definir la estructura del objeto JSON, convertirlo en una cadena JSON y escribirlo en un archivo.

<br>

Como siempre, podr茅is ver el ejemplo entero en el [Link](https://github.com/Esanpons/ejemplos-blog/tree/main/AL/JsonBasico)

<br>

隆Y eso es todo! Espero que esta explicaci贸n y el c贸digo os hayan sido de ayuda. Si ten茅is alg煤n comentario o pregunta, no dud茅is en hacerla. 隆Hasta la pr贸xima!
